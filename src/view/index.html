<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8"/>
    <title>北仑数字应急</title>
    <link rel="stylesheet" href="https://www.jq22.com/jquery/animate-3.1.0.min.css">
    <link rel="stylesheet" href="../../node_modules/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../../static/css/aa.css">
    <link rel="stylesheet" href="../../static/js/layuiadmin/layui/css/layui.css">

    <script type="text/javascript"
            src="http://api.map.baidu.com/api?v=2.0&ak=D5c091c2edbc6edfbccd9bf7194bf5f8"></script>
    <script type="text/javascript"
            src="http://api.map.baidu.com/library/AreaRestriction/1.2/src/AreaRestriction_min.js"></script>
    <script src="../../node_modules/jquery/dist/jquery.min.js" type="text/javascript"></script>
    <script src="../../node_modules/vue/dist/vue.js"></script>
    <style>

        .dirtyNoClick {
            float: right;
            background-color: #dc7f18;
            width: 160px;
            height: 50px;
            line-height: 50px;
            margin: 4px;
            text-align: center;
            color: white;
            z-index: 1;
            opacity: 1;
        }

        .dirtyClick {
            float: right;
            background-color: #30AACF;
            width: 160px;
            height: 50px;
            line-height: 50px;
            margin: 4px;
            text-align: center;
            color: white;
            z-index: 1;
            opacity: 1;
        }

        .tdBack{
           font-weight: bolder;
            color: #007DDB;
        }
        .realTimeNoClick {
            background-color: #dc7f18;
        }

        .realTimeClick {
            background-color: #30AACF;
        }


        .el-dialog-div {
            height: 72vh;
            overflow-x: hidden;
            overflow-y: auto;
        }


        /*.bg-purple {*/
        /*    background: #d3dce6;*/
        /*}*/
        .grid-content {
            min-height: 250px;
        }

        .el-col-bottom {
            margin-bottom: 10px;
        }

        .layui-layer-title {
            border-bottom: none;
        }
    </style>


</head>

<body>
<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
     style="display: none;">
    <symbol id="wave">
        <path d="M420,20c21.5-0.4,38.8-2.5,51.1-4.5c13.4-2.2,26.5-5.2,27.3-5.4C514,6.5,518,4.7,528.5,2.7c7.1-1.3,17.9-2.8,31.5-2.7c0,0,0,0,0,0v20H420z"></path>
        <path d="M420,20c-21.5-0.4-38.8-2.5-51.1-4.5c-13.4-2.2-26.5-5.2-27.3-5.4C326,6.5,322,4.7,311.5,2.7C304.3,1.4,293.6-0.1,280,0c0,0,0,0,0,0v20H420z"></path>
        <path d="M140,20c21.5-0.4,38.8-2.5,51.1-4.5c13.4-2.2,26.5-5.2,27.3-5.4C234,6.5,238,4.7,248.5,2.7c7.1-1.3,17.9-2.8,31.5-2.7c0,0,0,0,0,0v20H140z"></path>
        <path d="M140,20c-21.5-0.4-38.8-2.5-51.1-4.5c-13.4-2.2-26.5-5.2-27.3-5.4C46,6.5,42,4.7,31.5,2.7C24.3,1.4,13.6-0.1,0,0c0,0,0,0,0,0l0,20H140z"></path>
    </symbol>
</svg>


<div id="app">
    <!--    头工具条-->
    <div style="display: none;" id="toolbar" v-pre>
        <div class="layui-btn-group">
            <button type="button" lay-event="add" class="layui-btn layui-btn-primary layui-btn-sm">
                添加
            </button>
        </div>
    </div>

    <!--    行工具条-->
    <script type="text/html" id="barDemo" v-pre>
        <a class="layui-btn layui-btn-xs" lay-event="detail">修改定位点</a>
    </script>


    <!--父容器-->
    <div class="main" id="container_search">
    </div>
    <!--logo头-->

    <div>
        <transition name="rightInP12" enter-active-class="animated bounceIn " leave-active-class="animated bounceOut">
            <div class="top" v-show="setting.isShowCz">
                北仑 "数字应急"
            </div>
        </transition>
        <!--左侧-->
        <!-- <transition name="rightIn" enter-active-class="animated bounceInDown " leave-active-class="animated bounceOutUp">
            <div class="left" v-show="showOption.isLeftShow">
                <div class="menu_yellow" title="首页">
                    首页
                </div>
                <el-popover ref="popover2" :visible-arrow="false" placement="right" trigger="hover">
                    <div class="left_1" style="position:absolute;left:15px;top:0;width:164px; min-height:100px;background-color:#161c40;opacity:0.8;box-shadow: -1px 0px 5px 5px #161c40;">
                        <div @click="dwGL" class="menu_1_yellow" title="点位管理">
                            点位管理
                        </div>
                        <div @click="dirtyGL(true)" class="menu_1_yellow" title="污染源管理">
                            污染源管理
                        </div>
                    </div>
                </el-popover>
                <div v-popover:popover2 @mouseenter="mouseIn($event)" @mouseleave="mouseOut($event)" class="menu_yellow" title="基础数据">
                    基础数据
                </div>
                <el-popover ref="popover3" :visible-arrow="false" placement="right" trigger="hover">
                    <div class="left_1" style="position:absolute;left:15px;top:0;width:164px; min-height:100px;background-color:#161c40;opacity:0.8;box-shadow: -1px 0px 5px 5px #161c40;">
                        <div @click="showIndexEarlyWarning" class="menu_1_yellow" title="指标预警">
                            指标预警
                        </div>
                        <div @click="blueSky.show = true" class="menu_1_yellow" title="蓝天数完成度">
                            蓝天数完成度
                        </div>
                        <div @click="siteAnalysisShow" class="menu_1_yellow" title="站点分析">
                            站点分析
                        </div>
                        <div class="menu_1_yellow" title="多站对比">
                            多站对比
                        </div>
                        <div @click="showSiteRanking" class="menu_1_yellow" title="站点排名">
                            站点排名
                        </div>
                    </div>
                </el-popover>
                <div v-popover:popover3 @mouseenter="mouseIn($event)" @mouseleave="mouseOut($event)" class="menu_yellow" title="目标管理">
                    目标管理
                </div>
                <el-popover ref="popover4" :visible-arrow="false" placement="right" trigger="hover">
                    <div class="left_1" style="position:absolute;left:15px;top:0;width:164px; min-height:100px;background-color:#161c40;opacity:0.8;box-shadow: -1px 0px 5px 5px #161c40;">
                        <div class="menu_1_yellow" title="点位管理">
                            子菜单1
                        </div>
                        <div class="menu_1_yellow" title="污染源管理">
                            子菜单2
                        </div>
                    </div>
                </el-popover>
                <div v-popover:popover4 class="menu_yellow" @mouseenter="mouseIn($event)" @mouseleave="mouseOut($event)" title="系统管理">
                    系统管理
                </div>
                <div class="left_right" @click="showAndHideLeft(showOption.isLeftShow2)" title="点击缩进">
                </div>
            </div>
        </transition>
        <transition name="rightOut" enter-active-class="animated bounceInRight " leave-active-class="animated bounceOutRight">
            <div class="left_left" title="点击展开" v-show="showOption.isLeftShow2" @click="showAndHideLeft(showOption.isLeftShow2)" style="display:none;">
            </div>
        </transition> -->
        <!--左侧二级菜单div-->

        <!--右侧-->

        <transition name="rightIn" enter-active-class="animated bounceInDown "
                    leave-active-class="animated bounceOutUp">
            <div class="left-bottom" v-show="showOption.isRightShow">
                <div class="menu_blue_right" @mouseenter="mouseIn2($event,108)" @mouseleave="mouseOut2($event,108)"
                     @click="getData($event,'o3',108)" title="PM10">
                    危化安全企业
                </div>
                <div class="menu_yellow_right" @click="getData($event,'pm25',121)" @mouseenter="mouseIn2($event,121)"
                     @mouseleave="mouseOut2($event,121)" title="PM2.5">
                    安全生产企业
                </div>

                <div class="menu_yellow_right" @mouseenter="mouseIn2($event,129)"
                     @click="getData($event,'windSpeed',129)" @mouseleave="mouseOut2($event,129)">
                    防汛抗旱救灾
                </div>
                <div class="menu_yellow_right" @mouseenter="mouseIn2($event,130)"
                     @click="getData($event,'windDirection',130)" @mouseleave="mouseOut2($event,130)">
                    避灾安置场所
                </div>
                <div class="menu_yellow_right" @mouseenter="mouseIn2($event,126)" @click="getData($event,'temp',126)"
                     @mouseleave="mouseOut2($event,126)">
                    不稳定斜坡
                </div>
                <div class="menu_yellow_right" @mouseenter="mouseIn2($event,128)"
                     @click="getData($event,'humidity',128)" @mouseleave="mouseOut2($event,128)">
                    地质灾害隐患
                </div>
                <div class="left_right" @click="showAndHideRight(showOption.isRightShow2)" title="点击缩进">
                </div>
            </div>
        </transition>

        <transition v-show="!setting.isShowCz" name="rightOut" enter-active-class="animated bounceInLeft "
                    leave-active-class="animated bounceOutLeft">
            <div class="left_left_bottom" v-show="showOption.isRightShow2"
                 @click="showAndHideRight(showOption.isRightShow2)" title="点击展开">
            </div>
        </transition>
        <!--底部-->


        <!-- <transition name="rightInP12"
                enter-active-class="animated bounceIn "
                leave-active-class="animated bounceOut">
        <div v-show="setting.isShowCz"
             style="position:absolute;bottom:0px; height:60px;width:98%; left:1%;  background:url(../../static/js/index/img/bottom_back_color.png) repeat;">
            <div
                    @click="realTimeClick(!realTime.is)"
                    :class="realTime.is?'realTimeClick':'realTimeNoClick'"
                    style="float:left;width:50px;height:50px; line-height:50px; margin:4px; text-align:center;color:white; z-index:1;opacity:1;">
                实时
            </div>
            <div v-show="hour24.show"
                 style="float:left; background-color:#dc7f18;width:100px;height:50px; line-height:50px; margin:4px; text-align:center;color:white; z-index:1;opacity:1;cursor:pointer;"
                 @click="hour24_Show">
                24小时变化
            </div>
            <div v-show="!hour24.show"
                 style="float:left;margin-left:14px;width:300px;height:50px;line-height:50px; text-align:center;color:white; z-index:1;opacity:1;cursor:pointer;">

                <el-slider style="margin-top: 10px;" v-model="hour24.percentage"></el-slider>
            </div>


            <div @click="showDirtyPoint(!setting.dirtyClick)"
                 :class='[setting.dirtyClick?"dirtyClick":"dirtyNoClick"]'>
                污染源
            </div>
            <div @click="addLabel(setting.dianWeiShow)" :class='[!setting.dianWeiShow?"dirtyClick":"dirtyNoClick"]'
                 style="float:right; width:120px;height:50px; line-height:50px; margin:4px; text-align:center;color:white; z-index:1;opacity:1;">
                点位
            </div>

            <div class="r_in" style="position:absolute;top:-35px; left:50%;  margin-left: -102px;">
                <div class="box">
                    <div class="percent">
                        <div class="percentNum" id="count">{{blueSky.data.complete}}</div>
                        <div class="percentB">/{{blueSky.data.total}}</div>
                    </div>
                    <div id="water" class="water">
                        <svg viewBox="0 0 560 20" class="water_wave water_wave_back">
                            <use xlink:href="#wave"></use>
                        </svg>
                        <svg viewBox="0 0 560 20" class="water_wave water_wave_front">
                            <use xlink:href="#wave"></use>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </transition> -->
    </div>

    <!--    污染源管理弹出层-->
    <!--    <el-drawer-->
    <!--            title="污染源管理"-->
    <!--            :visible.sync="pop.dirty"-->
    <!--            direction="rtl"-->
    <!--            :modal="false"-->
    <!--            :modal-append-to-body="false"-->
    <!--            :wrapperClosable="false"-->
    <!--            :before-close="hideDirtyGL"-->
    <!--            size="30%">-->
    <!--        -->
    <!--    </el-drawer>-->

    <div id="dirty" class="hide" style="padding: 10px;">
        <table id="dirtyTable" lay-filter="dirtyTable"></table>
    </div>


    <!--    点位管理的弹出层-->
    <!--    <el-drawer-->
    <!--            title="定位管理"-->
    <!--            :visible.sync="pop.clearDw"-->
    <!--            direction="rtl"-->
    <!--            :modal="false"-->
    <!--            :modal-append-to-body="false"-->
    <!--            :wrapperClosable="false"-->
    <!--            :before-close="hideDwGL"-->
    <!--            size="30%">-->
    <!--        <div style="padding: 10px;">-->
    <!--            <table id="clearDwTable" lay-filter="clearDwTable"></table>-->
    <!--        </div>-->
    <!--    </el-drawer>-->

    <div id="clearDw" style="padding: 10px;">
        <table id="clearDwTable" lay-filter="clearDwTable"></table>
    </div>


    <!--站点分析弹出层-->
    <el-dialog title="提示" :visible.sync="pop.siteAnalysis" width="80%" top="3vh">
        <div class="el-dialog-div">
            <el-row :gutter="5">
                <el-col v-for="(item,idx) in echartsSetting.zdfxOption" :key="idx" class="el-col-bottom" :span="8">
                    <div :id='"ech"+idx' class="grid-content bg-purple"></div>
                </el-col>
            </el-row>
        </div>
        <div slot="footer" class="dialog-footer">
            <el-button @click="pop.siteAnalysis = false">取 消</el-button>
            <el-button type="primary" @click="pop.siteAnalysis = false">确 定</el-button>
        </div>
    </el-dialog>


    <!--指标预警弹出层-->
    <el-dialog title="指标预警" :visible.sync="indexEarlyWarning.show" width="80%" top="3vh">
        <div class="el-dialog-div" style="padding: 15px;">
            <el-table :data="indexEarlyWarning.list" border style="width: 100%">
                <el-table-column prop="key" label="指标项">
                </el-table-column>
                <el-table-column prop="assessmentValue" label="考核值">
                </el-table-column>
                <el-table-column prop="currentValue" label="当前值">
                </el-table-column>
                <el-table-column prop="lastYearSyncValue" label="去年同期值">
                </el-table-column>
                <el-table-column prop="yearOnYear" label="同比">
                </el-table-column>
            </el-table>
        </div>
        <!--        <div slot="footer" class="dialog-footer">-->
        <!--            <el-button @click="pop.siteAnalysis = false">取 消</el-button>-->
        <!--            <el-button type="primary" @click="pop.siteAnalysis = false">确 定</el-button>-->
        <!--        </div>-->
    </el-dialog>


    <!--蓝天数完成度-->
    <el-dialog :title="dataForm.QYMC+'的基本信息'" :visible.sync="blueSky.show" width="60%">
        <div style="padding:10px;">
            <table lay-even lay-skin="line" lay-size="sm" class="layui-table">
                <tr>
                    <td width="25%" class="tdBack">企业名称</td>
                    <td  width="25%" >{{dataForm.QYMC}}</td>
                    <td  width="25%"  class="tdBack">生产地址</td>
                    <td  width="25%" >{{dataForm.SCDZ}}</td>
                </tr>
                <tr>
                    <td class="tdBack">企业类型</td>

                    <td v-if="dataForm.QYLX=='001'">
                        <el-tag  type="" >
                            经营
                        </el-tag>
                    </td>
                    <td v-else-if="dataForm.QYLX=='002'">
                        <el-tag  type="success"  >
                            生产
                        </el-tag>
                    </td>
                    <td v-else-if="dataForm.QYLX=='003'">
                        <el-tag  type="warning"  >
                            使用
                        </el-tag>
                    </td>
                    <td v-else>
                        <el-tag  type="danger"  effect="dark">
                            未知
                        </el-tag>
                    </td>
                    <td class="tdBack">年均销售收入 /万元</td>
                    <td>{{dataForm.NJXSSR}}</td>
                </tr>
                <tr>
                    <td class="tdBack">企业负责人</td>
                    <td>{{dataForm.QYFZR}}</td>
                    <td class="tdBack">负责人手机号</td>
                    <td>{{dataForm.FZRSJ}}</td>
                </tr>
                <tr>
                    <td class="tdBack">分管安全负责人</td>
                    <td>{{dataForm.FGAQR?dataForm.FGAQR:"-"}}</td>
                    <td class="tdBack">分管安全负责人手机号</td>
                    <td>{{dataForm.FGAQRSJ?dataForm.FGAQRSJ:"-"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">专职安全生产管理人员人数</td>
                    <td>{{dataForm.ZASGRS?dataForm.ZASGRS:"0"}}</td>
                    <td class="tdBack">职工人数</td>
                    <td>{{dataForm.ZGRS?dataForm.ZGRS:"0"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">专职安全生产管理人员人数</td>
                    <td>{{dataForm.ZASGRS?dataForm.ZASGRS:"0"}}</td>
                    <td class="tdBack">职工人数</td>
                    <td>{{dataForm.ZGRS?dataForm.ZGRS:"0"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">剧毒化学品作业人员人数</td>
                    <td>{{dataForm.JHZRS?dataForm.JHZRS:"0"}}</td>
                    <td class="tdBack">危险化学品作业人员人数</td>
                    <td>{{dataForm.WHZRS?dataForm.WHZRS:"0"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">特种作业人员人数</td>
                    <td>{{dataForm.TZRS?dataForm.TZRS:"0"}}</td>
                    <td class="tdBack">安全生产标准化等级</td>
                    <td v-if="dataForm.AQSCBZHDJ=='001'">
                        一级
                    </td>
                    <td v-else-if="dataForm.AQSCBZHDJ=='002'">
                        二级
                    </td>
                    <td v-else-if="dataForm.AQSCBZHDJ=='003'">
                        三级
                    </td>
                    <td v-else-if="dataForm.AQSCBZHDJ=='004'">
                        四级
                    </td>
                    <td v-else>
<!--                        <el-tag  type="danger"  effect="dark">-->
                            /
<!--                        </el-tag>-->
                    </td>
                </tr>
                <tr>
                    <td class="tdBack">应急值班电话</td>
                    <td>{{dataForm.YJZDH?dataForm.YJZDH:"-"}}</td>
                    <td class="tdBack">重大危险源级别</td>
                    <td v-if="dataForm.ZDWXYJB=='001'">
                        一级
                    </td>
                    <td v-else-if="dataForm.ZDWXYJB=='002'">
                        二级
                    </td>
                    <td v-else-if="dataForm.ZDWXYJB=='003'">
                        三级
                    </td>
                    <td v-else-if="dataForm.ZDWXYJB=='004'">
                        四级
                    </td>
                    <td v-else>
<!--                        <el-tag  type="danger"  effect="dark">-->
                          否
<!--                        </el-tag>-->
                    </td>
                </tr>
                <tr>
                    <td class="tdBack">危险化学品库房或仓储场所建筑面积（平方米）</td>
                    <td>{{dataForm.WKFJZMJ?dataForm.WKFJZMJ:"0"}}</td>
                    <td class="tdBack">储罐（容器）总容积（立方米）</td>
                    <td>{{dataForm.CGRJ?dataForm.CGRJ:"0"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">位置经度</td>
                    <td>{{dataForm.WZJD?dataForm.WZJD:"-"}}</td>
                    <td class="tdBack">位置纬度</td>
                    <td>{{dataForm.WZWD?dataForm.WZWD:"-"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">化学品</td>
                    <td>{{dataForm.HXP?dataForm.HXP:"-"}}</td>
                    <td class="tdBack">重大危险源</td>
                    <td>{{dataForm.ZDWXY?dataForm.ZDWXY:"-"}}</td>
                </tr>
                <tr>
                    <td class="tdBack">危险工艺</td>
                    <td>{{dataForm.WXGY?dataForm.WXGY:"-"}}</td>
                    <td class="tdBack">备注信息</td>
                    <td>{{dataForm.REMARK?dataForm.REMARK:"-"}}</td>
                </tr>
            </table>
        </div>
        <!--        <div slot="footer" class="dialog-footer">-->
        <!--            <el-button @click="pop.siteAnalysis = false">取 消</el-button>-->
        <!--            <el-button type="primary" @click="pop.siteAnalysis = false">确 定</el-button>-->
        <!--        </div>-->
    </el-dialog>

    <!--站点排名弹出层-->
    <el-dialog title="站点排名" :visible.sync="siteRanking.show" width="60%">
        <div style="padding: 15px;">
            <div class="layui-card">
                <div class="layui-card-body">
                    <div class="layui-form-item">
                        <div class="layui-input-inline">
                            <el-select v-model="siteRanking.type" placeholder="请选择排名条件">
                                <el-option label="24小時" value="1"></el-option>
                                <el-option label="7天" value="2"></el-option>
                                <el-option label="近一月" value="3"></el-option>
                            </el-select>
                        </div>
                    </div>
                </div>
                <div class="layui-card-body">
                    <el-table :data="siteRanking.data" border style="width: 100%">
                        <el-table-column prop="aqi" label="AQI">
                        </el-table-column>

                        <el-table-column prop="o3" label="臭氧">
                        </el-table-column>

                        <el-table-column prop="pm25" label="PM2.5">
                        </el-table-column>

                    </el-table>
                </div>
            </div>

        </div>
        <!--        <div slot="footer" class="dialog-footer">-->
        <!--            <el-button @click="pop.siteAnalysis = false">取 消</el-button>-->
        <!--            <el-button type="primary" @click="pop.siteAnalysis = false">确 定</el-button>-->
        <!--        </div>-->
    </el-dialog>


    <!--    <div id="aa"  class="el-dialog-div hide">-->
    <!--        <el-row :gutter="5">-->
    <!--            <el-col v-for="(item,idx) in echartsSetting.zdfxOption" :key="idx" class="el-col-bottom" :span="8">-->
    <!--                <div :id='"ech"+idx' class="grid-content bg-purple"></div>-->
    <!--            </el-col>-->
    <!--        </el-row>-->
    <!--    </div>-->


    <!--    <el-dialog title="污染源管理" :visible.sync="pop.dirty">-->
    <!--        <table id="dirtyTable" lay-filter="dirtyTable"></table>-->
    <!--    </el-dialog>-->

</div>
</body>
<script src="../../static/js/layuiadmin/layui/layui.all.js"></script>
<script src="../../node_modules/element-ui/lib/index.js"></script>
<script src="../../node_modules/echarts/dist/echarts.js"></script>
<script src="../../config/api.js"></script>
<script src="../../static/js/tool/tool.js"></script>
<script src="./index.js"></script>
</html>